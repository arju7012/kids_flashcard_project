{% extends 'base.html' %}
{% load static %}

{% block title %}Learning {{ deck.name }} - Kids Flashcards Fun!{% endblock %}

{% block content %}
<div class="learn-container">
    {% if card %}
    <div class="flashcard-scene">
        <div class="flashcard" id="flashcard">
            <div class="card-face card-front">
                <h2 class="front-text">{{ card.front_text }}</h2>
                <div class="front-image-container">
                    <img src="{{ card.front_image.url }}" alt="Question Image">
                </div>
                <div class="front-buttons">
                    {% if card.front_audio %}
                        <button class="sound-button" id="front-audio-button">ðŸ”Š</button>
                        <audio id="front-audio" src="{{ card.front_audio.url }}"></audio>
                    {% endif %}
                    <button id="flip-button" class="btn btn-warning btn-lg rounded-pill shadow">Show Answer</button>
                </div>
            </div>

            <div class="card-face card-back">
                <video id="back-video" class="back-video" controls>
                    <source src="{{ card.back_video.url }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <p class="back-card-text">{{ card.back_text }}</p>
            </div>
        </div>
    </div>
    {% else %}
    <div class="container text-center">
        <div class="alert alert-info">
            <h2>Hooray! No cards due right now.</h2>
            <p class="mb-0">You can come back later to review more cards, or add new ones in the admin panel.</p>
        </div>
    </div>
    {% endif %}
</div>

<nav class="learn-nav d-flex justify-content-center align-items-center p-3">
    <div id="page-navigation" class="d-flex justify-content-around w-100">
        <span class="btn btn-secondary btn-lg rounded-pill shadow-sm disabled">â—€ Previous</span>
        <a href="{% url 'home' %}" class="btn btn-light btn-lg rounded-pill shadow-sm">Finish ðŸŽ‰</a>
    </div>

    <div id="answer-buttons" class="d-none">
        {% if card %}
            <a href="{% url 'process_review' card.id 'again' %}" class="btn btn-danger btn-lg rounded-pill shadow-sm">Again ðŸ˜¢</a>
            <a href="{% url 'process_review' card.id 'hard' %}" class="btn btn-warning btn-lg rounded-pill shadow-sm">Hard ðŸ¤”</a>
            <a href="{% url 'process_review' card.id 'good' %}" class="btn btn-success btn-lg rounded-pill shadow-sm">Good ðŸ™‚</a>
            <a href="{% url 'process_review' card.id 'easy' %}" class="btn btn-info btn-lg rounded-pill shadow-sm">Easy ðŸ˜„</a>
        {% endif %}
    </div>
</nav>

{% endblock %}


{% block scripts %}
<script src="{% static 'flashcards/js/script.js' %}"></script>
{% endblock %}